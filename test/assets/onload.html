<html>
<head>
<title>onLoad Test</title>
<script language="javascript" type="text/javascript">
    function doOnLoad(){
        addScript('inject',"function foo(){ document.getElementById('onload').innerText = 'this onload is executed'; } foo();");
    }


    function addScript(inject,code){
        var _in = document.getElementById('inject');
        var scriptNode = document.createElement('script');
        try {
          scriptNode.innerHTML = code;
        } catch (e) {
          // Internet Explorer
          scriptNode.text = code;
        }
        _in.appendChild(scriptNode);
    }

</script>
</head>
<body onload="doOnLoad();">
    <span id="onload" style="text-decoration: underline">error</span>
    <div id="inject"></div>
</body>
</html>